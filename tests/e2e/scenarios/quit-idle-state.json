{
  "name": "Quit Command - Idle State",
  "description": "Tests quit command behavior when application is idle (no active processing)",
  "setup": {
    "mockResponses": [
      {
        "endpoint": "/v1/chat/completions",
        "response": {
          "type": "fixed",
          "content": "Hello! I'm ready to help.",
          "delayMs": 50
        }
      }
    ]
  },
  "steps": [
    {
      "type": "wait",
      "action": "idle",
      "timeout": 8000
    },
    {
      "type": "assert",
      "action": "process_running",
      "timeout": 1000
    },
    {
      "type": "command",
      "action": "quit",
      "timeout": 2000
    }
  ],
  "assertions": [
    {
      "type": "process",
      "target": "application",
      "condition": "exit_code",
      "expected": 0
    },
    {
      "type": "process",
      "target": "application",
      "condition": "running",
      "expected": false
    }
  ],
  "cleanup": {
    "restoreEnvironment": true,
    "killProcesses": true
  }
}