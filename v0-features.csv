Feature,User-Visible,Perspectives,Key Files,Description
/persona command,Yes,"FE, Persona",app.ts,"Switch active persona, list personas, or trigger creation flow"
/pause command,Yes,"FE, Persona, Scheduled",app.ts,"Stop persona from responding (30m, 2h, or indefinite)"
/resume command,Yes,"FE, Persona, Scheduled",app.ts,"Resume a paused persona"
/archive command,Yes,"FE, Persona",app.ts,"Archive persona (removes from active list, keeps all data)"
/unarchive command,Yes,"FE, Persona",app.ts,"Restore an archived persona to active list"
/delete command,Yes,"FE, Persona",app.ts,"Permanently delete archived persona with option to clean up learned concepts"
/nick command,Yes,"FE, Persona",app.ts,"Add/remove/list aliases for persona"
/model command,Yes,"FE, LLM",app.ts,"View or set per-persona model override"
/group command,Yes,"FE, Persona, Data",app.ts,"Set persona's primary group (affects where new data is tagged)"
/groups command,Yes,"FE, Persona, Data",app.ts,"Manage which groups a persona can see data from"
/status command,Yes,"FE, Persona",app.ts,"Show persona's groups and which other personas they can see"
/undo command,Yes,"FE, Data",app.ts; state-manager.ts,"Revert last n state changes"
/savestate command,Yes,"FE, Data",app.ts; state-manager.ts,"Save named state snapshot to disk"
/restorestate command,Yes,"FE, Data",app.ts; state-manager.ts,"Restore previously saved state snapshot"
/new command,Yes,"FE, Persona",app.ts,"Start persona creation flow"
/clarify command,Yes,"FE, LLM",app.ts,"Ask Ei to clarify a specific learned concept"
/editor command,Yes,FE,app.ts,"Open $EDITOR for multi-line message composition"
/refresh command,Yes,"FE, Data",app.ts,"Reload all data from disk"
/help command,Yes,FE,app.ts,"Show help modal with command reference"
/quit command,Yes,FE,app.ts,"Exit app (--force bypasses confirmation)"
Ctrl+C exit,Yes,FE,app.ts,"Two-press confirmation exit"
Ctrl+E editor,Yes,FE,app.ts,"Open multi-line editor"
Ctrl+H focus,Yes,FE,app.ts,"Focus persona list"
Ctrl+L focus,Yes,FE,app.ts,"Focus input box"
Ctrl+R refresh,Yes,FE,app.ts,"Reload data from disk"
PageUp/PageDown scroll,Yes,FE,app.ts,"Scroll chat history"
Escape/Q emergency exit,Yes,FE,app.ts,"Immediate exit"
Responsive layout,Yes,FE,layout-manager.ts,"Full/medium/compact layout based on terminal width"
Persona status indicators,Yes,"FE, Persona",persona-renderer.ts,"Typing spinners, pause icons, unread counts in persona list"
Markdown rendering,Yes,FE,chat-renderer.ts,"Bold, italic, code blocks, headers in chat display"
Unicode/emoji handling,Yes,FE,unicode-width.ts,"Proper display width calculation for emoji"
Ei global persona,Yes,"Persona, Data, Learning","app.ts; extraction.ts","First persona, sees all data, arbiter of truth for cross-persona validation"
Per-persona chat history,Yes,"Persona, Data, FE","storage.ts; app.ts","Each persona has independent conversation history"
Persona visibility rules,Yes,"Persona, Data","prompts/response/sections.ts; app.ts","Personas only see human data tagged with their groups"
Persona creation flow,Yes,"Persona, LLM","persona-creator.ts; persona-builder.ts","Confirm name -> describe in editor -> LLM generates traits/topics"
Persona short/long descriptions,Yes,"Persona, LLM",types.ts,"Two description lengths used in response prompts"
Persona alias system,Yes,"Persona, FE","app.ts; storage.ts","Multiple nicknames per persona for /persona switching"
Auto-resume from pause,Yes,"Persona, Scheduled",app.ts,"Paused personas auto-resume after specified duration"
Heartbeat system,Yes,"Scheduled, Persona, LLM",ei-heartbeat.ts,"Personas proactively reach out after inactivity period"
Daily ceremony,Yes,"Scheduled, Persona",app.ts,"Morning greeting/check-in from Ei"
HumanEntity structure,No,Data,types.ts,"Core entity with facts, traits, topics, people buckets"
PersonaEntity structure,No,"Data, Persona",types.ts,"Persona entity with traits, topics, descriptions, groups"
Facts bucket,No,"Data, Learning",types.ts,"Biographical data (birthday, job, family) with confidence score"
Traits bucket,No,"Data, Learning",types.ts,"Personality/behavior patterns with strength value"
Topics bucket,No,"Data, Learning",types.ts,"Interests with exposure_current and exposure_desired"
People bucket,No,"Data, Learning",types.ts,"Relationships (family, friends) with sentiment and exposure"
Semantic field: sentiment,No,"Data, Learning",types.ts,"Emotional valence from -1 to 1"
Semantic field: strength,No,"Data, Learning",types.ts,"How strongly a trait manifests (0 to 1)"
Semantic field: confidence,No,"Data, Learning",types.ts,"How certain a fact is accurate (0 to 1)"
Semantic field: exposure_current,No,"Data, Learning",types.ts,"How recently/frequently discussed (0 to 1)"
Semantic field: exposure_desired,No,"Data, Learning",types.ts,"How much entity wants to discuss (0 to 1)"
change_log field,No,"Data, Learning",types.ts,"Audit trail of who changed what and when"
learned_by field,No,"Data, Learning",types.ts,"Which persona learned this data item"
persona_groups field,No,"Data, Learning",types.ts,"Which groups can see this data item (* = global)"
Archive state persistence,No,"Data, Persona",storage.ts,"Stores archived status and date per persona"
Pause state persistence,No,"Data, Persona",storage.ts,"Stores pause status and expiry time per persona"
Extraction state tracking,No,"Data, Learning",storage.ts,"Last extraction timestamp per entity/data-type"
JSONC file storage,No,Data,storage.ts,"Human-readable JSON with comments for all persistence"
State snapshots for undo,No,Data,state-manager.ts,"Full state captures enabling undo functionality"
Three-step extraction pipeline,No,"Learning, BE","extraction.ts","Scan -> Match -> Update pipeline for human data"
Step 1: Fast scan,No,Learning,"prompts/extraction/step1/*","Detect potential facts/traits/topics/people from new messages"
Step 2: Match,No,Learning,"prompts/extraction/step2/match.ts","Match detections against existing items"
Step 3: Update,No,Learning,"prompts/extraction/step3/update.ts","Detailed update with evidence validation"
Confidence filtering,No,Learning,extraction.ts,"Skip low-confidence detections from Step 1"
Evidence requirements,No,Learning,extraction.ts,"Require quoted message evidence for traits/topics"
Persona trait extraction,No,"Learning, Persona","prompts/persona/traits.ts","Learn traits from user requests (""be more direct"")"
Persona topic detection,No,"Learning, Persona","prompts/persona/topics-detection.ts","Detect topics personas engage with"
Persona topic exploration,No,"Learning, Persona","prompts/persona/topics-exploration.ts","Generate new topics personas might care about"
Extraction frequency throttling,No,Learning,extraction-frequency.ts,"Min 10 messages between fact/trait extractions"
Message splitting,No,Learning,extraction.ts,"Only analyze messages since last extraction"
Cross-persona validation,No,"Learning, Persona",extraction.ts,"Queue global changes by non-Ei personas for Ei validation"
Skip signals,No,Learning,extraction.ts,"LLM can return {skip: true} for irrelevant items"
Known persona filtering,No,Learning,extraction.ts,"Exclude AI personas from people bucket"
Description regeneration,No,"Learning, Persona",extraction.ts,"Auto-regenerate persona descriptions when traits change"
Local LLM provider,Yes,LLM,llm.ts,"LM Studio / Ollama / local models (default)"
OpenAI provider,Yes,LLM,llm.ts,"GPT-4o and other OpenAI models"
Anthropic provider,Yes,LLM,llm.ts,"Claude models"
Google provider,Yes,LLM,llm.ts,"Gemini models"
xAI provider,Yes,LLM,llm.ts,"Grok models"
Model routing by operation,No,LLM,llm.ts,"Different default models for response vs concept vs generation"
Per-persona model override,Yes,"LLM, Persona","llm.ts; app.ts","Override model for specific persona via /model"
Temperature per operation,No,LLM,llm.ts,"0.3 for extraction, 0.7 for response, 0.5 for generation"
JSON parsing and repair,No,LLM,llm.ts,"Handle malformed JSON from LLMs"
LLM abort support,Yes,"LLM, BE",llm.ts,"Cancel in-progress LLM calls"
Provider status display,Yes,LLM,llm.ts,"Show which providers are configured (/model --list)"
Message processing flow,No,BE,processor.ts,"Human message -> response -> extraction trigger"
Priority queue,No,BE,llm-queue.ts,"LLM tasks queued by priority (high/normal/low)"
Persistent queue,No,BE,llm-queue.ts,"Queue survives app restart"
Queue pause on typing,No,BE,queue-processor.ts,"Suspend background work during user input"
Debouncing,No,BE,app.ts,"2-second debounce on message processing"
Retry logic,No,BE,llm-queue.ts,"Failed LLM calls retry with backoff"
Idle/busy state transitions,No,BE,queue-processor.ts,"Queue processor state machine"
Event handler callbacks,No,BE,processor.ts,"Callbacks for UI updates (onMessageAdded, etc.)"
Topic exposure decay,No,"Scheduled, Data",topic-decay.ts,"exposure_current decays logarithmically over time"
Desire gap detection,No,"Scheduled, Learning",topic-decay.ts,"Identify topics that are under or over-discussed"
Stale message processing,No,"Scheduled, Learning",app.ts,"Process concepts from old unprocessed messages"
Background queue processing,No,"Scheduled, BE",queue-processor.ts,"Continuous LLM task processing in background"
