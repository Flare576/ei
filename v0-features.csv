Feature,V1,User-Visible,Perspectives,Key Files,Description
/persona command,Left Panel - List,Yes,"FE, Persona",app.ts,"Switch active persona, list personas, or trigger creation flow"
/pause command,Left Panel - Hover,Yes,"FE, Persona, Scheduled",app.ts,"Stop persona from responding (30m, 2h, or indefinite)"
/resume command,Left Panel - Hover,Yes,"FE, Persona, Scheduled",app.ts,Resume a paused persona
/archive command,Left Panel - Hover,Yes,"FE, Persona",app.ts,"Archive persona (removes from active list, keeps all data)"
/unarchive command,Left Panel - Footer,Yes,"FE, Persona",app.ts,Restore an archived persona to active list
/delete command,Left Panel - Hover,Yes,"FE, Persona",app.ts,Permanently delete archived persona with option to clean up learned concepts
/nick command,Persona Editor,Yes,"FE, Persona",app.ts,Add/remove/list aliases for persona
/model command,Persona Editor,Yes,"FE, LLM",app.ts,View or set per-persona model override
/group command,Persona Editor,Yes,"FE, Persona, Data",app.ts,Set persona's primary group (affects where new data is tagged)
/groups command,Persona Editor,Yes,"FE, Persona, Data",app.ts,Manage which groups a persona can see data from
/status command,Persona Editor,Yes,"FE, Persona",app.ts,Show persona's groups and which other personas they can see
/undo command,Left Panel - Top,Yes,"FE, Data",app.ts; state-manager.ts,Revert last n state changes
/savestate command,Left Panel - Top,Yes,"FE, Data",app.ts; state-manager.ts,Save named state snapshot to disk
/restorestate command,Left Panel - Top,Yes,"FE, Data",app.ts; state-manager.ts,Restore previously saved state snapshot
/new command,Left Panel - Bottom,Yes,"FE, Persona",app.ts,Start persona creation flow
/clarify command,Human Editor,Yes,"FE, LLM",app.ts,Ask Ei to clarify a specific learned concept
/editor command,Expanding INPUT,Yes,FE,app.ts,Open $EDITOR for multi-line message composition
/refresh command,N/A,Yes,"FE, Data",app.ts,Reload all data from disk
/help command,Left Panel - Top,Yes,FE,app.ts,Show help modal with command reference
/quit command,Save on tab close,Yes,FE,app.ts,Exit app (--force bypasses confirmation)
Ctrl+C exit,Clear Input,Yes,FE,app.ts,Two-press confirmation exit
Ctrl+E editor,N/A,Yes,FE,app.ts,Open multi-line editor
Ctrl+H focus,Nav,Yes,FE,app.ts,Focus persona list
Ctrl+L focus,Nav,Yes,FE,app.ts,Focus input box
Ctrl+R refresh,N/A,Yes,FE,app.ts,Reload data from disk
PageUp/PageDown scroll,Always Chat History,Yes,FE,app.ts,Scroll chat history
Escape/Q emergency exit,Global Pause/Unpause,Yes,FE,app.ts,Immediate exit
Responsive layout,2 Sizes,Yes,FE,layout-manager.ts,Full/medium/compact layout based on terminal width
Persona status indicators,Persona Panel,Yes,"FE, Persona",persona-renderer.ts,"Typing spinners, pause icons, unread counts in persona list"
Markdown rendering,Message History,Yes,FE,chat-renderer.ts,"Bold, italic, code blocks, headers in chat display"
Unicode/emoji handling,Editor/Message History,Yes,FE,unicode-width.ts,Proper display width calculation for emoji
Ei global persona,Default,Yes,"Persona, Data, Learning",app.ts; extraction.ts,"First persona, sees all data, arbiter of truth for cross-persona validation"
Per-persona chat history,Chat history,Yes,"Persona, Data, FE",storage.ts; app.ts,Each persona has independent conversation history
Persona visibility rules,Persona Editor,Yes,"Persona, Data",prompts/response/sections.ts; app.ts,Personas only see human data tagged with their groups
Persona creation flow,Left Panel - Bottom,Yes,"Persona, LLM",persona-creator.ts; persona-builder.ts,Confirm name -> describe in editor -> LLM generates traits/topics
Persona short/long descriptions,Background Jobs,Yes,"Persona, LLM",types.ts,Two description lengths used in response prompts
Persona alias system,Persona Editor,Yes,"Persona, FE",app.ts; storage.ts,Multiple nicknames per persona for /persona switching
Auto-resume from pause,Processor Loop,Yes,"Persona, Scheduled",app.ts,Paused personas auto-resume after specified duration
Heartbeat system,Processor Loop,Yes,"Scheduled, Persona, LLM",ei-heartbeat.ts,Personas proactively reach out after inactivity period
Daily ceremony,"Definition change: Now describes: Exposure, Decay, Expire, Explore",Yes,"Scheduled, Persona",app.ts,Morning greeting/check-in from Ei
HumanEntity structure,Human Editor,No,Data,types.ts,"Core entity with facts, traits, topics, people buckets"
PersonaEntity structure,Persona Editor,No,"Data, Persona",types.ts,"Persona entity with traits, topics, descriptions, groups"
Facts bucket,Human Editor,No,"Data, Learning",types.ts,"Biographical data (birthday, job, family) with confidence score"
Traits bucket,Human Editor,No,"Data, Learning",types.ts,Personality/behavior patterns with strength value
Topics bucket,Human Editor,No,"Data, Learning",types.ts,Interests with exposure_current and exposure_desired
People bucket,Human Editor,No,"Data, Learning",types.ts,"Relationships (family, friends) with sentiment and exposure"
Semantic field: sentiment,DataItem,No,"Data, Learning",types.ts,Emotional valence from -1 to 1
Semantic field: strength,Traits,No,"Data, Learning",types.ts,How strongly a trait manifests (0 to 1)
Semantic field: confidence,Step1,No,"Data, Learning",types.ts,How certain a fact is accurate (0 to 1)
Semantic field: exposure_current,Ceremony - Exposure,No,"Data, Learning",types.ts,How recently/frequently discussed (0 to 1)
Semantic field: exposure_desired,Ceremony - Step 3,No,"Data, Learning",types.ts,How much entity wants to discuss (0 to 1)
change_log field,Ceremony - Exposure,No,"Data, Learning",types.ts,Audit trail of who changed what and when
learned_by field,Ceremony - Exposure,No,"Data, Learning",types.ts,Which persona learned this data item
persona_groups field,Ceremony - Exposure,No,"Data, Learning",types.ts,Which groups can see this data item (* = global)
Archive state persistence,PersonaEntity,No,"Data, Persona",storage.ts,Stores archived status and date per persona
Pause state persistence,PersonaEntity,No,"Data, Persona",storage.ts,Stores pause status and expiry time per persona
Extraction state tracking,HumanEntity,No,"Data, Learning",storage.ts,Last extraction timestamp per entity/data-type
JSONC file storage,FUCK NO,No,Data,storage.ts,Human-readable JSON with comments for all persistence
State snapshots for undo,Auto_save,No,Data,state-manager.ts,Full state captures enabling undo functionality
Three-step extraction pipeline,Ceremony - Exposure,No,"Learning, BE",extraction.ts,Scan -> Match -> Update pipeline for human data
Step 1: Fast scan,Ceremony - Exposure - Step 1,No,Learning,prompts/extraction/step1/*,Detect potential facts/traits/topics/people from new messages
Step 2: Match,Ceremony - Exposure - Step 2,No,Learning,prompts/extraction/step2/match.ts,Match detections against existing items
Step 3: Update,Ceremony - Exposure - Step 3,No,Learning,prompts/extraction/step3/update.ts,Detailed update with evidence validation
Confidence filtering,Ceremony - Exposure - Step 1,No,Learning,extraction.ts,Skip low-confidence detections from Step 1
Evidence requirements,Ceremony - Exposure - Step 1,No,Learning,extraction.ts,Require quoted message evidence for traits/topics
Persona trait extraction,Message Loop: Human,No,"Learning, Persona",prompts/persona/traits.ts,"Learn traits from user requests (""be more direct"")"
Persona topic detection,Ceremony - Exposure,No,"Learning, Persona",prompts/persona/topics-detection.ts,Detect topics personas engage with
Persona topic exploration,Ceremony - Explore,No,"Learning, Persona",prompts/persona/topics-exploration.ts,Generate new topics personas might care about
Extraction frequency throttling,Only Ei,No,Learning,extraction-frequency.ts,Min 10 messages between fact/trait extractions
Message splitting,Ceremony Where Appropriate,No,Learning,extraction.ts,Only analyze messages since last extraction
Cross-persona validation,Ceremony - Exposure - Step 3,No,"Learning, Persona",extraction.ts,Queue global changes by non-Ei personas for Ei validation
Skip signals,Ceremony - Exposure - Step 3,No,Learning,extraction.ts,LLM can return {skip: true} for irrelevant items
Known persona filtering,Ceremony - Exposure - Step 1,No,Learning,extraction.ts,Exclude AI personas from people bucket
Description regeneration,Ceremony - Description,No,"Learning, Persona",extraction.ts,Auto-regenerate persona descriptions when traits change
Local LLM provider,Setup,Yes,LLM,llm.ts,LM Studio / Ollama / local models (default)
OpenAI provider,Setup,Yes,LLM,llm.ts,GPT-4o and other OpenAI models
Anthropic provider,Setup,Yes,LLM,llm.ts,Claude models
Google provider,Setup,Yes,LLM,llm.ts,Gemini models
xAI provider,Setup,Yes,LLM,llm.ts,Grok models
Model routing by operation,Setup,No,LLM,llm.ts,Different default models for response vs concept vs generation
Per-persona model override,Persona Editor / Persona Setup,Yes,"LLM, Persona",llm.ts; app.ts,Override model for specific persona via /model
Temperature per operation,Internal,No,LLM,llm.ts,"0.3 for extraction, 0.7 for response, 0.5 for generation"
JSON parsing and repair,Internal,No,LLM,llm.ts,Handle malformed JSON from LLMs
LLM abort support,Pause (system and persona),Yes,"LLM, BE",llm.ts,Cancel in-progress LLM calls
Provider status display,Human Editor - Settings,Yes,LLM,llm.ts,Show which providers are configured (/model --list)
Message processing flow,Near Pause for system/ on icon for persona,No,BE,processor.ts,Human message -> response -> extraction trigger
Priority queue,Internal,No,BE,llm-queue.ts,LLM tasks queued by priority (high/normal/low)
Persistent queue,Internal/Storage,No,BE,llm-queue.ts,Queue survives app restart
Queue pause on typing,"FE can send ""PausePersona"" and ""resumePersona"" as required - web won't need it",No,BE,queue-processor.ts,Suspend background work during user input
Debouncing,"I don't think. I want to deal with this specifically - ""up"" to pull back the last sent messages is fine",No,BE,app.ts,2-second debounce on message processing
Retry logic,Internal,No,BE,llm-queue.ts,Failed LLM calls retry with backoff
Idle/busy state transitions,Events,No,BE,queue-processor.ts,Queue processor state machine
Event handler callbacks,Events,No,BE,processor.ts,"Callbacks for UI updates (onMessageAdded, etc.)"
Topic exposure decay,Ceremony - Decay,No,"Scheduled, Data",topic-decay.ts,exposure_current decays logarithmically over time
Desire gap detection,Heartbeat,No,"Scheduled, Learning",topic-decay.ts,Identify topics that are under or over-discussed
Stale message processing,N/A ! We fixed this with Ceremony,No,"Scheduled, Learning",app.ts,Process concepts from old unprocessed messages
Background queue processing,Core to Processor,No,"Scheduled, BE",queue-processor.ts,Continuous LLM task processing in background